<!doctype html><html><head><title>Timeout control · dromara(Open source organization)</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The girl on the prairie"><meta name=generator content="Hugo 0.55.5"><link rel="shortcut icon" href=/img/favicon.png type=image/png><link href=https://unpkg.com/purecss@1.0.0/build/base-min.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/zoom-image.css rel=stylesheet><script src=/js/iconfont.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>window.SITE_LANGUAGE="en"</script><script src=/js/app.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-187960192-2','auto');ga('send','pageview');}</script></head><body><header class=ss-header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=logo-link href=/en/><img class=logo src=/img/logo.png></a><div class=-show-mobile><a id=mobile-menu-icon><svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"/></svg></a><nav id=mobile-menu><div id=js-menu-search-mobile class=navbar-search-mobile><input class=input placeholder=Search><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div><a href=/en/projects/><span>Projects</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/guides/><span>Guides</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/blog/><span>Blog</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/activities/><span>Activity</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/awesome/><span>Awesome Dromara</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/projects/sofa-rpc/bolt-timeout/><span>中文</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"/></svg></a></nav></div></div><div class="navbar-menu -hidden-mobile"><div class=navbar-start><a class=navbar-item href=/en/projects/>Projects</a>
<a class=navbar-item href=/en/guides/>Guides</a>
<a class=navbar-item href=/en/blog/>Blog</a>
<a class=navbar-item href=/en/activities/>Activity</a>
<a class=navbar-item href=/awesome/>Awesome Dromara</a></div><div class=navbar-end><div class=navbar-item><div id=js-menu-search class=navbar-search><input class=input placeholder=Search><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div></div><div class=navbar-item><a class=translation href=/projects/sofa-rpc/bolt-timeout/>中</a></div></div></div></nav></header><div class=ss-layout-container><aside class="ss-layout-aside -left ss-card -soft-hidden"></aside><main class="ss-layout-main -card"><div class=ss-meta><div class=container><h1 class=title>Timeout control</h1><a class="edit-button -hidden-mobile" href=https://github.com/dromara/edit/master/content/en/projects/sofa-rpc/bolt-timeout/index.md>Edit</a></div><div class=meta>Update time: 2021-01-24</div></div><article class=typo><p>When using the Bolt protocol for communication, invoke timeout defaults is 3 seconds. You can configure the timeout when referencing the service, and can also configure the timeout period from the dimension of service or method respectively. SOFARPC timeout can be set in milliseconds.</p><h3 id=service>Service</h3><p>If you need to set the timeout from the dimension of service when publishing a service, just configure the timeout parameter to the corresponding value.</p><h4 id=use-xml>Use XML</h4><p>If you reference the service using XML, set the value of the <code>timeout</code> attribute of the <code>&lt;sofa:global-attrs&gt;</code> tag under the <code>&lt;sofa:binding.bolt&gt;</code> tag:</p><pre><code class=language-Xml>&lt;sofa:reference interface=&quot;com.example.demo.SampleService&quot; id=&quot;sampleService&quot;&gt; 
    &lt;sofa:binding.bolt&gt; 
        &lt;sofa:global-attrs timeout=&quot;2000&quot;/&gt; 
    &lt;/sofa:binding.bolt&gt; 
&lt;/sofa:reference&gt; 
</code></pre><h4 id=use-annotation>Use Annotation</h4><p>If you reference the service using Annotation, set the value of the <code>timeout</code> attribute of <code>@SofaReferenceBinding</code>:</p><pre><code class=language-java>@SofaReference(binding = @SofaReferenceBinding(bindingType = &quot;bolt&quot;, timeout = 2000)) 
private SampleService sampleService; 
</code></pre><h4 id=use-api-in-spring-environment>Use API in Spring environment</h4><p>If you reference the service in Spring or Spring Boot environment, just set the value of <code>timeout</code> attribute of <code>BoltBindingParam</code>:</p><pre><code class=language-java>BoltBindingParam boltBindingParam = new BoltBindingParam(); 
boltBindingParam.setTimeout(2000) 
</code></pre><h4 id=use-api-in-non-spring-environment>Use API in non-Spring environment</h4><p>If you reference service using the bare API of SOFARPC directly in non-Spring environment, just set the <code>timeout</code> attribute of <code>ConsumerConfig</code>:</p><pre><code class=language-java>ConsumerConfig&lt;SampleService&gt; consumerConfig = new ConsumerConfig&lt;SampleService&gt;() 
    .setInterfaceId(SampleService.class.getName()) 
    .setRegistry(registryConfig) 
    .setProtocol(&quot;bolt&quot;)
    .setTimeout(2000); 
</code></pre><h3 id=method>Method</h3><p>If you want to adjust the timeout for a certain method in a service individually, you can set the timeout period from the dimension of method.</p><p>For a method, the timeout period of the method is prioritized. If not set, the timeout period of the service will be used.</p><h4 id=use-xml-1>Use XML</h4><p>If you reference service using XML, just set the <code>timeout</code> attribute of the corresponding <code>&lt;sofa: method&gt;</code>:</p><pre><code class=language-XML>&lt;Sofa: Reference interface = &quot;com.example.demo .SampleService&quot; id=&quot;sampleService&quot;&gt; 
    &lt;sofa:binding.bolt&gt; 
        &lt;sofa:method name=&quot;hello&quot; timeout=&quot;2000&quot;/&gt; 
    &lt;/sofa:binding.bolt&gt; 
&lt;/sofa:reference&gt; 
</code></pre><h4 id=use-annotation-1>Use Annotation</h4><p>No method is available for setting the method-level timeout with Annotation currenty.</p><h4 id=use-api-in-spring-environment-1>Use API in Spring environment</h4><p>To reference a service in Spring or Spring Boot environment, you can just set the value of <code>timeout</code> attribute of <code>RpcBindingMethodInfo</code></p><pre><code class=language-java>BoltBindingParam boltBindingParam = new BoltBindingParam();

RpcBindingMethodInfo rpcBindingMethodInfo = new RpcBindingMethodInfo();
rpcBindingMethodInfo.setName(&quot;hello&quot;);
rpcBindingMethodInfo.setTimeout(2000);

List&lt;RpcBindingMethodInfo&gt; rpcBindingMethodInfos = new ArrayList&lt;&gt;();
rpcBindingMethodInfos.add(rpcBindingMethodInfo);

boltBindingParam.setMethodInfos(rpcBindingMethodInfos);
</code></pre><h4 id=use-api-in-non-spring-api-environment>Use API in non-Spring API environment</h4><p>If you reference a service using the bare API of SOFARPC which run in non-Spring environment, just configure the <code>timeout</code> attribute of <code>MethodConfig</code>:</p><pre><code class=language-java>MethodConfig methodConfig = new MethodConfig();
methodConfig.setName(&quot;hello&quot;);
methodConfig.setTimeout(2000);

List&lt;MethodConfig&gt; methodConfigs = new ArrayList&lt;MethodConfig&gt;();
methodConfigs.add(methodConfig);

ConsumerConfig&lt;SampleService&gt; consumerConfig = new ConsumerConfig&lt;SampleService&gt;()
    .setInterfaceId(SampleService.class.getName())
    .setRegistry(registryConfig)
    .setProtocol(&quot;bolt&quot;)
    .setMethods(methodConfigs);
</code></pre></article></main></div><footer class=ss-footer><div class=container><div class=links><div class=cate><h2 class=cate-title>Resources</h2><a class=link href=https://github.com/dromara>Github</a>
<a class=link href=https://gitee.com/shuaiqiyu>Gitee</a></div><div class=cate><h2 class=cate-title>Get Involved</h2><a class=link href=https://github.com/dromara/soul/issues/new>Feedback</a>
<a class=link href=/community>Community</a>
<a class=link href=/blog>Blog</a></div><div class=cate><h2 class=cate-title>Document</h2><a class=link href=/projects/soul/overview/>Soul</a>
<a class=link href=/projects/hmily/overview/>Hmily</a>
<a class=link href=/projects/raincat/overview/>Raincat</a>
<a class=link href=/projects/myth/overview/>Myth</a></div></div><div class=qrcode><div><img class=qrcode-img src=/img/qrcode/qrcode_1.png><p class=qrcode-desc>Wechat Official Account</p></div><div><img class=qrcode-img src=/img/qrcode/qrcode_2.png><p class=qrcode-desc>QQ Group</p></div></div></div><div class=copyright><p>Copyright ©2021
<a href=/>xiaoyu@apache.org by xiaoyu</a></p></div></footer></body></html>