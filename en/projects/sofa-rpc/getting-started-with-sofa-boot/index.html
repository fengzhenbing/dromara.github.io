<!doctype html><html><head><title>Get started with SOFABoot · dromara(Open source organization)</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The girl on the prairie"><meta name=generator content="Hugo 0.55.5"><link rel="shortcut icon" href=/img/favicon.png type=image/png><link href=https://unpkg.com/purecss@1.0.0/build/base-min.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/zoom-image.css rel=stylesheet><script src=/js/iconfont.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>window.SITE_LANGUAGE="en"</script><script src=/js/app.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-187960192-2','auto');ga('send','pageview');}</script></head><body><header class=ss-header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=logo-link href=/en/><img class=logo src=/img/logo.png></a><div class=-show-mobile><a id=mobile-menu-icon><svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"/></svg></a><nav id=mobile-menu><div id=js-menu-search-mobile class=navbar-search-mobile><input class=input placeholder=Search><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div><a href=/en/projects/><span>Projects</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/guides/><span>Guides</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/blog/><span>Blog</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/en/activities/><span>Activity</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/awesome/><span>Awesome Dromara</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/projects/sofa-rpc/getting-started-with-sofa-boot/><span>中文</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"/></svg></a></nav></div></div><div class="navbar-menu -hidden-mobile"><div class=navbar-start><a class=navbar-item href=/en/projects/>Projects</a>
<a class=navbar-item href=/en/guides/>Guides</a>
<a class=navbar-item href=/en/blog/>Blog</a>
<a class=navbar-item href=/en/activities/>Activity</a>
<a class=navbar-item href=/awesome/>Awesome Dromara</a></div><div class=navbar-end><div class=navbar-item><div id=js-menu-search class=navbar-search><input class=input placeholder=Search><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div></div><div class=navbar-item><a class=translation href=/projects/sofa-rpc/getting-started-with-sofa-boot/>中</a></div></div></div></nav></header><div class=ss-layout-container><aside class="ss-layout-aside -left ss-card -soft-hidden"></aside><main class="ss-layout-main -card"><div class=ss-meta><div class=container><h1 class=title>Get started with SOFABoot</h1><a class="edit-button -hidden-mobile" href=https://github.com/dromara/edit/master/content/en/projects/sofa-rpc/getting-started-with-sofa-boot/index.md>Edit</a></div><div class=meta>Update time: 2021-01-24</div></div><article class=typo><p>This document introduces how to use SOFARPC for service publishing and reference in SOFABoot.</p><p>You can get the code sample of this document by clicking <a href=https://github.com/sofastack/sofa-rpc/tree/master/example/src/test/java/com/alipay/sofa/rpc/quickstart>here</a>. Note that the code sample requires a local installation of the zookeeper environment. If not, you need to remove the <code>com.alipay.sofa.rpc.registry.address</code> configuration in <code>application.properties</code> to use the local file as a registry center.</p><h2 id=create-a-project>Create a project</h2><ol><li>Prepare environment: SOFABoot requires JDK7 or JDK8 and needs to be compiled with Apache Maven 2.2.5 or above.</li><li>Build SOFABoot project: SOFABoot is based on Spring Boot. So you can use <a href=http://start.spring.io/>Spring Boot&rsquo;s project generation tool</a> to generate a standard Spring Boot project.</li><li>Add SOFABoot dependency: The generated standard Spring Boot project directly uses Spring parent dependency, which should be changed to the parent dependency provided by SOFABoot. The parent dependency provides and manages a variety of starters provided by SOFABoot.</li></ol><pre><code class=language-xml>&lt;parent&gt; 
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; 
    &lt;version&gt;${spring.boot.version}&lt;/version&gt; 
    &lt;relativePath/&gt; 
&lt;/parent&gt; 
</code></pre><p>Replace the above with the followings:</p><pre><code class=language-xml>&lt;parent&gt; 
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt; 
    &lt;artifactId&gt;sofaboot-dependencies&lt;/artifactId&gt; 
    &lt;version&gt;3.0.0&lt;/version&gt; 
&lt;/parent&gt; 
</code></pre><ol><li><p>Configure <code>application.properties</code>:
<code>application.properties</code> is the configuration file in SOFABoot project. Here you need to configure the application name.</p><pre><code>spring.application.name=AppName 
</code></pre></li><li><p>Introduce RPC starter:</p></li></ol><pre><code class=language-xml>&lt;dependency&gt;
     &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
     &lt;artifactId&gt;rpc-sofa-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt; 
</code></pre><ol><li>Declare the xsd file of SOFABoot:</li></ol><p>In the XML configuration file to be used, configure the declaration of the header xsd file to the followings. This enables development using the XML elements defined by SOFABoot.</p><pre><code class=language-xml>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; 
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; 
       xmlns:xsi=&quot;http://www .w3.org/2001/XMLSchema-instance&quot; 
       xmlns:sofa=&quot;http://sofastack.io/schema/sofaboot&quot; 
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot; 
       xsi:schemaLocation =&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
            http://sofastack.io/schema/sofaboot http://sofastack .io/schema/sofaboot.xsd&quot;
</code></pre><h2 id=define-service-interface-and-implementation>Define service interface and implementation</h2><pre><code class=language-java>public interface HelloSyncService { 

    String saySync(String string); 
} 
</code></pre><pre><code class=language-java>public class HelloSyncServiceImpl implements HelloSyncService { 

    @Override 
    public String saySync(String string) { 
        return string; 
    } 
} 
</code></pre><h2 id=publish-service-on-server>Publish service on server</h2><p>Configure the followings in the xml file. When the Spring context is refreshed, SOFABoot registers the service implementation on the server, communicates with the client by bolt protocol, and publishes metadata such as address to registry center (local file is used as registry center by default).</p><pre><code class=language-xml>&lt;bean id=&quot;helloSyncServiceImpl&quot; class=&quot;com.alipay.sofa.rpc.samples.invoke.HelloSyncServiceImpl&quot;/&gt; 
&lt;sofa:service ref=&quot;helloSyncServiceImpl&quot; interface=&quot;com.alipay.sofa.rpc. samples.invoke.HelloSyncService&quot;
    &lt;sofa:binding.bolt/&gt; 
&lt;/sofa:service&gt; 
</code></pre><h2 id=reference-service-by-client>Reference service by client</h2><p>Configure the followings in the xml file. When the Spring context is refreshed, SOFABoot generates an RPC proxy bean, <code>personReferenceBolt</code>. This allows you to use the bean directly in the code for remote call.</p><pre><code class=language-xml>&lt;sofa:reference id=&quot;helloSyncServiceReference&quot; interface=&quot;com.alipay.sofa.rpc.samples.invoke.HelloSyncService&quot;&gt; 
    &lt;sofa:binding.bolt/&gt; 
&lt;/sofa:reference&gt; 
</code></pre><h2 id=run-the-project>Run the project</h2><p>The startup class of SpringBoot is coded as follows. The above xml file is loaded here using ImportResource.</p><pre><code class=language-java>@ImportResource({ &quot;classpath*:rpc-sofa-boot-starter-samples.xml&quot; }) 
@org.springframework.boot.autoconfigure.SpringBootApplication
public class SofaBootRpcSamplesApplication {
    public static void main(String[] args) {
          SpringApplication springApplication = new SpringApplication(SofaBootRpcSamplesApplication.class); 
          ApplicationContext applicationContext = springApplication.run(args);           

          HelloSyncService helloSyncServiceReference = (HelloSyncService) applicationContext 
            .getBean(&quot;helloSyncServiceReference&quot;); 

          System.out.println(helloSyncServiceReference.saySync(&quot;sync&quot;) ); 
    } 
} 
</code></pre><p>The output result is as follows:</p><pre><code>sync 
</code></pre><p>By this step, you&rsquo;ve completed service publishing and reference.</p></article></main></div><footer class=ss-footer><div class=container><div class=links><div class=cate><h2 class=cate-title>Resources</h2><a class=link href=https://github.com/dromara>Github</a>
<a class=link href=https://gitee.com/shuaiqiyu>Gitee</a></div><div class=cate><h2 class=cate-title>Get Involved</h2><a class=link href=https://github.com/dromara/soul/issues/new>Feedback</a>
<a class=link href=/community>Community</a>
<a class=link href=/blog>Blog</a></div><div class=cate><h2 class=cate-title>Document</h2><a class=link href=/projects/soul/overview/>Soul</a>
<a class=link href=/projects/hmily/overview/>Hmily</a>
<a class=link href=/projects/raincat/overview/>Raincat</a>
<a class=link href=/projects/myth/overview/>Myth</a></div></div><div class=qrcode><div><img class=qrcode-img src=/img/qrcode/qrcode_1.png><p class=qrcode-desc>Wechat Official Account</p></div><div><img class=qrcode-img src=/img/qrcode/qrcode_2.png><p class=qrcode-desc>QQ Group</p></div></div></div><div class=copyright><p>Copyright ©2021
<a href=/>xiaoyu@apache.org by xiaoyu</a></p></div></footer></body></html>